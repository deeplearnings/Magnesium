(function(e){function t(t){for(var o,s,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],r[s]&&p.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/sso/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1635:function(e,t,n){"use strict";var o=n("6090"),r=n.n(o);r.a},1806:function(e,t,n){"use strict";var o=n("8530"),r=n.n(o);r.a},"1d6a":function(e,t,n){},"3ee0":function(e,t,n){e.exports=n.p+"img/bg.5825f033.svg"},"4ecf":function(e,t,n){"use strict";var o=n("a828"),r=n.n(o);r.a},"4ffd":function(e,t,n){e.exports=n.p+"img/logo.1b6b71ac.png"},5198:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o,r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{staticClass:"dev-article-bg",style:{backgroundImage:"url("+e.bgUrl+")"}},[n("NavBar"),n("Content",[n("router-view")],1)],1)},s=[],i=n("3ee0"),u=n.n(i),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Header",{staticClass:"dev-header"},[n("div",{staticClass:"layout-logo",style:{backgroundImage:"url("+e.logoImg+")"}}),n("div",{staticClass:"layout-logo-title"},[n("span",{staticClass:"logo-title"},[e._v("单点登录系统")])])])},l=[],d=n("4ffd"),p=n.n(d),g={data:function(){return{logoImg:p.a}}},f=g,h=(n("1806"),n("2877")),m=Object(h["a"])(f,c,l,!1,null,"3b2fc69a",null),v=m.exports,b={components:{NavBar:v},data:function(){return{bgUrl:u.a,uagAppId:this.$route.query.uagAppId,uagDeviceToken:this.$route.query.uagDeviceToken,uagAccessToken:this.$route.query.uagAccessToken}},mounted:function(){this.checkSsoParam()},methods:{checkSsoParam:function(){"undefined"!==typeof this.uagAppId&&"undefined"!==typeof this.uagAccessToken?this.routeLoginCardByLoginType():this.$router.push("/err")},routeLoginCardByLoginType:function(){var e=this;this.utils.netUtil.postWithAccessToken(this.uagAppId,this.uagAccessToken,this.API_PTAH.authGetCurrentAppInfo,{},function(t){"0"==t.data.errCode?"1"==t.data.datas?e.$router.push({path:"/sms",query:{uagAppId:e.uagAppId,uagAccessToken:e.uagAccessToken,uagDeviceToken:e.uagDeviceToken}}):e.$router.push({path:"/password",query:{uagAppId:e.uagAppId,uagAccessToken:e.uagAccessToken,uagDeviceToken:e.uagDeviceToken}}):e.$router.push("/err")})}}},w=b,L=(n("e31e"),Object(h["a"])(w,a,s,!1,null,"536f1e96",null)),y=L.exports,k=n("f825"),T=n.n(k),A=(n("f8ce"),n("8b5e"),n("96cf"),n("3b8d")),C=n("bc3a"),I=n.n(C),P={},x=I.a.CancelToken;I.a.interceptors.request.use(function(e){return P[e.url]?(P[e.url]("cancel"),P[e.url]=o):P[e.url]=o,e},function(e){return Promise.reject(e)}),I.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="连接错误".concat(e.response.status)}else"cancel"!=e.message&&(e.message="连接到服务器失败");return"cancel"!=e.message&&k["Message"].error(e.message),Promise.resolve(e.response)}),I.a.defaults.baseURL="",I.a.defaults.headers={"Content-Type":"application/json",Accept:"application/json"},I.a.defaults.timeout=1e4;var S={postAsync:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I()({method:"post",url:t,data:n,cancelToken:new x(function(e){o=e})});case 2:if(r=e.sent,"undefined"!=typeof r){e.next=6;break}return console.log("response is undefined,may be the request is cancelled"),e.abrupt("return");case 6:return"0"!=r.data.errCode&&"undefined"!=typeof r.data.errCode&&k["Message"].error("请求失败 错误码 ".concat(r.data.errCode," 错误信息: ").concat(r.data.errMsg)),e.abrupt("return",r.data.datas);case 8:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),post:function(e,t,n,r){var a={"Content-Type":"application/json",Accept:"application/json"};I()({headers:a,method:"post",url:e,data:t,cancelToken:new x(function(e){o=e})}).then(function(e){"undefined"!=typeof e?"0"===e.data.errCode?n(e):("undefined"!=typeof e.data.errCode&&k["Message"].error("请求失败 错误码 ".concat(e.data.errCode," 错误信息: ").concat(e.data.errMsg)),"undefined"!=typeof r&&r(e)):console.log("response is undefined,may be the request is cancelled")})},postWithAccessToken:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,n,r,a,s,i){var u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:u={"Content-Type":"application/json",Accept:"application/json",appId:t,accessToken:n},I()({headers:u,method:"post",url:r,data:a,cancelToken:new x(function(e){o=e})}).then(function(e){"undefined"!=typeof e?"0"===e.data.errCode?s(e):("undefined"!=typeof e.data.errCode&&k["Message"].error("请求失败 错误码 ".concat(e.data.errCode," 错误信息: ").concat(e.data.errMsg)),"undefined"!=typeof i&&i(e)):console.log("response is undefined,may be the request is cancelled")});case 2:case"end":return e.stop()}},e)}));function t(t,n,o,r,a,s){return e.apply(this,arguments)}return t}()},$=n("7618"),F={copyObj:function(e){var t,n={};for(t in e)n[t]=e[t];return n},uniqueArray:function(e){for(var t=[e[0]],n=1;n<e.length;n++){for(var o=e[n],r=!1,a=0;a<t.length;a++)if(o===t[a]){r=!0;break}r||t.push(o)}return t},removeEmptyValueInArray:function(e){for(var t=0;t<e.length;t++)""!=e[t]&&null!=e[t]&&void 0!=Object($["a"])(e[t])||(e.splice(t,1),t-=1);return this.uniqueArray(e)}};Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};var D=F,_=(n("28a5"),n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Row",[n("i-col",{attrs:{span:"4",offset:"10"}},[n("Card",{staticClass:"login-card",staticStyle:{width:"350px"}},[n("span",{staticClass:"title"},[e._v("  登录账号")]),n("Divider"),n("Form",{ref:"smsLoginFrom",attrs:{"label-position":"top",model:e.smsLoginFrom,rules:e.smsLoginFromValidate}},[n("FormItem",{attrs:{label:"用户名",prop:"telPhone"}},[n("i-input",{attrs:{type:"text",placeholder:"请输入手机号"},model:{value:e.smsLoginFrom.telPhone,callback:function(t){e.$set(e.smsLoginFrom,"telPhone",t)},expression:"smsLoginFrom.telPhone"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),n("Row",[n("i-col",{attrs:{span:"14"}},[n("FormItem",{attrs:{prop:"smsCode",label:"验证码"}},[n("i-input",{attrs:{type:"text",placeholder:"请输入短信验证码"},model:{value:e.smsLoginFrom.smsCode,callback:function(t){e.$set(e.smsLoginFrom,"smsCode",t)},expression:"smsLoginFrom.smsCode"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),n("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v(" ")]),n("i-col",{attrs:{span:"8"}},[n("FormItem",[n("CountDownButton",{ref:"countDownButton",attrs:{countDown:e.countDown,showText:e.showText,reShowText:e.reShowText},nativeOn:{click:function(t){return e.sendSmsCode(t)}}})],1)],1)],1),n("FormItem",[n("Button",{attrs:{type:"success",long:"",disabled:e.globalLoginLoding},on:{click:function(t){return e.handleSubmit("smsLoginFrom")}}},[e._v("短信验证码登录")])],1)],1)],1)],1)],1)}),O=[],j=(n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"count-down-button",attrs:{disabled:e.globalButtonLoding,type:"button"}},[e._v(e._s(e.content)+"\n")])}),B=[],q={props:["countDown","showText","reShowText"],data:function(){return{content:this.showText,cg:this.countDown}},computed:{globalButtonLoding:function(){return this.$store.state.globalButtonLoding}},methods:{changeCountNumber:function(){var e=this;this.$store.commit("statusGlobalButtonLoding");var t=setInterval(function(){e.cg>-1?(e.content=e.cg,e.cg--):(e.$store.commit("statusGlobalButtonLoding"),e.content=e.reShowText,e.cg=e.countDown,clearInterval(t))},1e3)}}},R=q,M=(n("cf46"),Object(h["a"])(R,j,B,!1,null,"3b723d0c",null)),U=M.exports,G={name:"SmsCodeLoginCard",components:{CountDownButton:U},data:function(){return{countDown:60,showText:"获取验证码",reShowText:"重新获取",uagAppId:this.$route.query.uagAppId,uagDeviceToken:this.$route.query.uagDeviceToken,uagAccessToken:this.$route.query.uagAccessToken,smsLoginFrom:{telPhone:"",smsCode:""},smsLoginFromValidate:{telPhone:[{pattern:/^[0-9]{11}$/,required:!0,message:"请输入正确的手机号码",trigger:"blur"}],smsCode:[{pattern:/^[0-9]{4}$/,required:!0,message:"请输入正确格式的验证码",trigger:"blur"}]}}},mounted:function(){this.checkSsoParam()},computed:{globalLoginLoding:function(){return this.$store.state.globalLoginLoding}},methods:{sendSmsCode:function(){var e=this,t=/^[0-9]{11}$/,n=this.smsLoginFrom.telPhone;t.test(n)?this.utils.netUtil.postWithAccessToken(this.uagAppId,this.uagAccessToken,this.API_PTAH.authSendLoginSms,{deviceToken:this.deviceToken,telPhone:n},function(t){t.data.datas&&(e.$Message.success("已发送短信验证码"),e.$refs.countDownButton.changeCountNumber())}):this.$Message.error("请输入正确的手机号码!")},checkSsoParam:function(){"undefined"!==typeof this.uagAppId&&"undefined"!==typeof this.uagAccessToken&&"undefined"!==typeof this.uagDeviceToken||this.$router.push("/err")},doLogin:function(){var e=this;this.$store.commit("statusGlobalLoginLoding"),this.utils.netUtil.postWithAccessToken(this.uagAppId,this.uagAccessToken,this.API_PTAH.authSmsCodeLogin,{telPhone:this.smsLoginFrom.telPhone,smsCode:this.smsLoginFrom.smsCode},function(t){if(e.$store.commit("statusGlobalLoginLoding"),"1"===t.data.datas.loginStatus){var n=t.data.datas.oauthBaseUrl;n="".concat(n,"?uagDeviceToken=").concat(e.uagDeviceToken),window.location.href=n}},function(){e.$store.commit("statusGlobalLoginLoding")})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.doLogin():t.$Message.error("请完善表单信息!")})}}},E=G,H=(n("d952"),Object(h["a"])(E,_,O,!1,null,"715ea45f",null)),N=H.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Row",[n("i-col",{attrs:{span:"4",offset:"10"}},[n("Card",{staticClass:"login-card",staticStyle:{width:"350px"}},[n("span",{staticClass:"title"},[e._v("  登录账号")]),n("Divider"),n("Form",{ref:"passwordLoginFrom",attrs:{"label-position":"top",model:e.passwordLoginFrom,rules:e.passwordLoginFromValidate}},[n("FormItem",{attrs:{label:"用户名",prop:"telPhone"}},[n("i-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.passwordLoginFrom.telPhone,callback:function(t){e.$set(e.passwordLoginFrom,"telPhone",t)},expression:"passwordLoginFrom.telPhone"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),n("FormItem",{attrs:{label:"密码",prop:"password"}},[n("i-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.passwordLoginFrom.password,callback:function(t){e.$set(e.passwordLoginFrom,"password",t)},expression:"passwordLoginFrom.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),n("FormItem",[n("Button",{attrs:{type:"success",long:"",disabled:e.globalLoginLoding},on:{click:function(t){return e.handleSubmit("passwordLoginFrom")}}},[e._v("账号密码登录")])],1)],1)],1)],1)],1)},V=[],W={name:"SmsCodeLoginCard",data:function(){return{uagAppId:this.$route.query.uagAppId,uagDeviceToken:this.$route.query.uagDeviceToken,uagAccessToken:this.$route.query.uagAccessToken,passwordLoginFrom:{telPhone:"",password:""},passwordLoginFromValidate:{telPhone:[{pattern:/^[0-9]{11}$/,required:!0,message:"请输入正确的手机号码",trigger:"blur"}],password:[{required:!0,type:"string",min:5,max:30,message:"密码为长度为5-30之间的字符",trigger:"blur"}]}}},mounted:function(){this.checkSsoParam()},computed:{globalLoginLoding:function(){return this.$store.state.globalLoginLoding}},methods:{checkSsoParam:function(){"undefined"!==typeof this.uagAppId&&"undefined"!==typeof this.uagAccessToken&&"undefined"!==typeof this.uagDeviceToken||this.$router.push("/err")},doLogin:function(){var e=this;this.$store.commit("statusGlobalLoginLoding"),this.utils.netUtil.postWithAccessToken(this.uagAppId,this.uagAccessToken,this.API_PTAH.authPasswordLogin,{telPhone:this.passwordLoginFrom.telPhone,password:this.passwordLoginFrom.password},function(t){if(e.$store.commit("statusGlobalLoginLoding"),"1"===t.data.datas.loginStatus){var n=t.data.datas.oauthBaseUrl;console.log("oauthBaseUrl = ".concat(n)),console.log("".concat(n,"?uagDeviceToken=").concat(e.uagDeviceToken)),window.location.href="".concat(n,"?uagDeviceToken=").concat(e.uagDeviceToken)}},function(){e.$store.commit("statusGlobalLoginLoding")})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.doLogin():t.$Message.error("请完善表单信息!")})}}},J=W,K=(n("1635"),Object(h["a"])(J,z,V,!1,null,"9520be82",null)),Q=K.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Row",[n("i-col",{attrs:{span:"2",offset:"10"}},[n("div",{staticClass:"err-info-box"},[n("P",{staticClass:"err-msg"},[e._v("页面飞到火星去啦")]),n("img",{staticClass:"err-img",attrs:{src:e.errImg404}})],1)])],1)},Y=[],Z=n("8f20"),ee=n.n(Z),te={data:function(){return{errImg404:ee.a}},mounted:function(){},methods:{}},ne=te,oe=(n("4ecf"),Object(h["a"])(ne,X,Y,!1,null,"456f3154",null)),re=oe.exports,ae=n("8c4f");r["default"].use(ae["a"]);var se={};se.routerPath=[{path:"/sms",component:N,icon:"ios-appstore",name:"短信验证码登录"},{path:"/password",component:Q,icon:"ios-appstore",name:"账号密码登录"},{path:"/err",component:re,icon:"ios-appstore",name:"错误页面"},{path:"",redirect:"/sms"}],se.initRouterGenerate=new ae["a"]({routes:se.routerPath});var ie=se,ue={initRouterTreeNameArr:function(e){var t=[],n=[];e.split("/").forEach(function(e){""!=e&&t.push("/"+e)}),t.pop(),t.push(e);var o=e;while(o.split("/").length-1>1)o=o.slice(0,o.lastIndexOf("/")),t.push(o);return t=D.removeEmptyValueInArray(t),ie.routerPath.forEach(function(e){t.forEach(function(t){var o=!1;e.path.indexOf(":")>0&&e.path.slice(0,e.path.indexOf(":"))===t.slice(0,t.lastIndexOf("/")+1)&&(o=!0),e.path===t&&(o=!0),o&&n.push(e)})}),n},getPcUrlByRouterPath:function(e){var t="",n=JSON.parse(localStorage.menuArr);return n.map(function(n){n.path===e&&(t=n.pcUrl)}),t},getMenuListFromLocalRouterConfig:function(){var e=JSON.parse(localStorage.menuArr);return e.splice(0,1),e}},ce=ue,le={sendAutoParentFrameSizeMsg:function(){setInterval(function(){var e=window.document.body.offsetHeight;window.parent.postMessage({subFrameHeight:e},"*")},500)},reSizeParentFrameSize:function(e){window.addEventListener("message",function(t){var n=t.data.subFrameHeight;"undefined"!=typeof n&&(n="".concat(n,"px"),e.commit("reSizeFrameHeight",n))},!1)}},de=le,pe={netUtil:S,objectUtil:D,frameUtil:de,routerUtil:ce},ge=pe,fe={authSendLoginSms:"/auth/sendLoginSms",authInitializeDevice:"/auth/initializeDevice",authSmsCodeLogin:"/auth/smsCodeLogin",authPasswordLogin:"/auth/passwordLogin",authGetCurrentAppInfo:"/auth/getCurrentAppInfo"},he=fe,me=n("2f62"),ve={globalButtonLoding:!1,globalScreenLoding:!1,globalLoginLoding:!1},be=ve,we={statusGlobalButtonLoding:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.globalButtonLoding=!t.globalButtonLoding;case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),statusGlobalScreenLoding:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.globalScreenLoding=!t.globalScreenLoding;case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),statusGlobalLoginLoding:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.globalLoginLoding=!t.globalLoginLoding;case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},Le=we;r["default"].use(me["a"]);var ye={};ye.initsStoreInstance=new me["a"].Store({state:be,mutations:Le});var ke=ye,Te=n("2b27"),Ae=n.n(Te);r["default"].use(T.a),r["default"].use(Ae.a),r["default"].config.productionTip=!1,ge.vue=void 0,r["default"].prototype.utils=ge,r["default"].prototype.API_PTAH=he;var Ce=ie.initRouterGenerate,Ie=ke.initsStoreInstance;new r["default"]({router:Ce,store:Ie,render:function(e){return e(y)}}).$mount("#app")},6090:function(e,t,n){},"73a5":function(e,t,n){},8530:function(e,t,n){},"8b5e":function(e,t,n){},"8f20":function(e,t,n){e.exports=n.p+"img/404.2361d16e.png"},a828:function(e,t,n){},cf46:function(e,t,n){"use strict";var o=n("73a5"),r=n.n(o);r.a},d952:function(e,t,n){"use strict";var o=n("1d6a"),r=n.n(o);r.a},e31e:function(e,t,n){"use strict";var o=n("5198"),r=n.n(o);r.a}});
//# sourceMappingURL=app.4030634a.js.map